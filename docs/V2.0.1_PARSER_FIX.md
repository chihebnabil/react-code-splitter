# v2.0.1 - Parser Fix for TypeScript Files

## Bug Fix

### Issue
When running interactive mode on TypeScript files (`.tsx`) with interfaces, the parser would fail:

```bash
npx react-code-splitter auto -i adminpage.tsx

SyntaxError: Unexpected reserved word 'interface'. (26:0)
```

### Root Cause
The interactive mode wasn't properly passing the parser configuration to jscodeshift. It was using the default babel parser which doesn't understand TypeScript syntax like `interface`.

### Fix
Updated `bin/cli.js` in the `runInteractiveMode` function:

1. **Auto-detect parser based on file extension**:
   ```javascript
   const parser = options.parser || (file.endsWith('.tsx') || file.endsWith('.ts') ? 'tsx' : 'babel');
   ```

2. **Create jscodeshift with proper parser**:
   ```javascript
   const api = { 
     jscodeshift: jscodeshift.withParser(parser),
     j: jscodeshift.withParser(parser),
     stats: () => {},
     report: () => {}
   };
   ```

3. **Pass parser to transform options**:
   ```javascript
   const firstPassOptions = {
     ...options,
     interactive: true,
     minElements: options.minElements || '3',
     parser: parser  // ‚Üê Added this
   };
   ```

4. **Added error handling**:
   ```javascript
   try {
     // ... transform logic
   } catch (error) {
     console.error(chalk.red(`\n‚úó Error processing ${file}:`));
     console.error(chalk.red(error.message));
     console.log(chalk.yellow('\nüí° Tip: Try specifying parser with --parser tsx or --parser babel\n'));
   }
   ```

### Now Works With

‚úÖ `.tsx` files with TypeScript syntax (interfaces, types, etc.)  
‚úÖ `.ts` files with TypeScript  
‚úÖ `.jsx` files with JSX  
‚úÖ `.js` files with plain JavaScript  

### Usage

```bash
# Auto-detects parser from file extension
npx react-code-splitter auto -i adminpage.tsx

# Or explicitly specify parser
npx react-code-splitter auto -i --parser tsx adminpage.tsx

# Works with TypeScript interfaces now!
interface Props {
  name: string;
}

function MyComponent({ name }: Props) {
  return <div>{name}</div>;
}
```

### Testing

```bash
npm test
# ‚úÖ All 9 tests passing
```

## Changes

- **bin/cli.js**: 
  - Auto-detect parser from file extension
  - Use `jscodeshift.withParser()` for proper TypeScript support
  - Added try-catch error handling with helpful messages
  - Pass parser option to transform

## Publishing

```bash
npm version patch  # 2.0.0 ‚Üí 2.0.1
npm test          # Verify tests pass
npm publish       # Push to npm
```

---

**Issue reported by**: @chihebnabil  
**Fixed in**: v2.0.1  
**Published**: October 2, 2025
